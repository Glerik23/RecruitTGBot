<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecruitTG - Система рекрутингу</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/modules/ui.css">
    <link rel="stylesheet" href="/static/css/views/candidate.css">
    <link rel="stylesheet" href="/static/css/views/hr.css">
    <link rel="stylesheet" href="/static/css/views/analyst.css">
    <link rel="stylesheet" href="/static/css/views/director.css">

</head>

<body>
    <div id="app" class="container">
        <div class="loading">
            <div class="spinner"></div>
            <p>Завантаження...</p>
        </div>
    </div>

    <!-- Main Entry Point -->
    <div id="error-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0f0f0f; color: #ff6b6b; padding: 20px; z-index: 9999; font-family: monospace; overflow: auto;">
        <h2 style="border-bottom: 1px solid #ff6b6b; padding-bottom: 10px;">Critical Error</h2>
        <pre id="error-message" style="white-space: pre-wrap; margin-top: 10px;"></pre>
        <button onclick="window.location.reload()"
            style="margin-top: 20px; padding: 10px 20px; background: #333; color: white; border: 1px solid #666; cursor: pointer;">Reload
            Application</button>
    </div>

    <script>
        function showError(title, message) {
            const overlay = document.getElementById('error-overlay');
            const msgEl = document.getElementById('error-message');
            // Hide loading if present
            const loading = document.querySelector('.loading');
            if (loading) loading.style.display = 'none';

            overlay.style.display = 'block';
            msgEl.textContent = `${title}\n\n${message}`;
            console.error(title, message);
        }

        window.onerror = function (msg, url, line, col, error) {
            showError('Runtime Error', `${msg}\nAt: ${url}:${line}:${col}\nStack: ${error ? error.stack : 'N/A'}`);
            return false;
        };

        window.onunhandledrejection = function (event) {
            showError('Unhandled Promise Rejection', event.reason ? (event.reason.stack || event.reason) : event.reason);
        };

        window.addEventListener('error', function (event) {
            if (event.target && (event.target.tagName === 'SCRIPT' || event.target.tagName === 'LINK')) {
                showError('Resource Loading Error', `Failed to load resource: ${event.target.src || event.target.href}`);
            }
        }, true);
    </script>

    <script type="module" src="/static/js/app.js"></script>
</body>

</html>